{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\NamPham\\\\Documents\\\\ReactJS\\\\webchat\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"C:\\\\Users\\\\NamPham\\\\Documents\\\\ReactJS\\\\webchat\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport { useEffect, useState } from 'react';\nimport { db } from '../firebase/config';\n\nvar useFirestore = function useFirestore(collection, condittion) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      documents = _useState2[0],\n      setDocuments = _useState2[1];\n\n  useEffect(function () {\n    var collectionRef = db.collection(collection).orderBy('createdAt'); // condittion\n    // {\n    //    fieldName: 'abc',\n    //    operator: '==',\n    //    compareValue: 'abc'\n    // }\n\n    if (condittion) {\n      if (!condittion.compareValue || !condittion.compareValue.length) {\n        return;\n      }\n\n      collectionRef = collectionRef.where(condittion.fieldName, condittion.operator, condittion.compareValue);\n    }\n\n    var unsubscribe = collectionRef.onSnapshot(function (snapshot) {\n      var documents = snapshot.docs.map(function (doc) {\n        return _objectSpread({}, doc.data(), {\n          id: doc.id\n        });\n      });\n      setDocuments(documents);\n    });\n    return unsubscribe;\n  }, [collection, condittion]);\n  return documents;\n};\n\nexport default useFirestore;","map":{"version":3,"names":["useEffect","useState","db","useFirestore","collection","condittion","documents","setDocuments","collectionRef","orderBy","compareValue","length","where","fieldName","operator","unsubscribe","onSnapshot","snapshot","docs","map","doc","data","id"],"sources":["C:/Users/NamPham/Documents/ReactJS/webchat/src/hooks/useFirestore.js"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { db } from '../firebase/config';\r\n\r\nconst useFirestore = (collection, condittion) => {\r\n   const [documents, setDocuments] = useState([]);\r\n\r\n   useEffect(() => {\r\n      let collectionRef = db.collection(collection).orderBy('createdAt');\r\n      \r\n      // condittion\r\n      // {\r\n      //    fieldName: 'abc',\r\n      //    operator: '==',\r\n      //    compareValue: 'abc'\r\n      // }\r\n      if (condittion) {\r\n         if (!condittion.compareValue || !condittion.compareValue.length) {\r\n            return;\r\n         }\r\n\r\n         collectionRef = collectionRef.where(\r\n            condittion.fieldName,\r\n            condittion.operator,\r\n            condittion.compareValue\r\n         );\r\n      }\r\n\r\n      const unsubscribe = collectionRef.onSnapshot((snapshot) => {\r\n         const documents = snapshot.docs.map(doc => ({\r\n            ...doc.data(),\r\n            id: doc.id,\r\n         }));\r\n\r\n         setDocuments(documents);\r\n      });\r\n      \r\n      return unsubscribe;\r\n   }, [collection, condittion]);\r\n\r\n   return documents;\r\n}\r\n\r\nexport default useFirestore;"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,EAAT,QAAmB,oBAAnB;;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,UAAD,EAAaC,UAAb,EAA4B;EAAA,gBACZJ,QAAQ,CAAC,EAAD,CADI;EAAA;EAAA,IACvCK,SADuC;EAAA,IAC5BC,YAD4B;;EAG9CP,SAAS,CAAC,YAAM;IACb,IAAIQ,aAAa,GAAGN,EAAE,CAACE,UAAH,CAAcA,UAAd,EAA0BK,OAA1B,CAAkC,WAAlC,CAApB,CADa,CAGb;IACA;IACA;IACA;IACA;IACA;;IACA,IAAIJ,UAAJ,EAAgB;MACb,IAAI,CAACA,UAAU,CAACK,YAAZ,IAA4B,CAACL,UAAU,CAACK,YAAX,CAAwBC,MAAzD,EAAiE;QAC9D;MACF;;MAEDH,aAAa,GAAGA,aAAa,CAACI,KAAd,CACbP,UAAU,CAACQ,SADE,EAEbR,UAAU,CAACS,QAFE,EAGbT,UAAU,CAACK,YAHE,CAAhB;IAKF;;IAED,IAAMK,WAAW,GAAGP,aAAa,CAACQ,UAAd,CAAyB,UAACC,QAAD,EAAc;MACxD,IAAMX,SAAS,GAAGW,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,UAAAC,GAAG;QAAA,yBACjCA,GAAG,CAACC,IAAJ,EADiC;UAEpCC,EAAE,EAAEF,GAAG,CAACE;QAF4B;MAAA,CAArB,CAAlB;MAKAf,YAAY,CAACD,SAAD,CAAZ;IACF,CAPmB,CAApB;IASA,OAAOS,WAAP;EACF,CA/BQ,EA+BN,CAACX,UAAD,EAAaC,UAAb,CA/BM,CAAT;EAiCA,OAAOC,SAAP;AACF,CArCD;;AAuCA,eAAeH,YAAf"},"metadata":{},"sourceType":"module"}