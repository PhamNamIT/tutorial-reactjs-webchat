{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\NamPham\\\\Documents\\\\ReactJS\\\\webchat\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"C:\\\\Users\\\\NamPham\\\\Documents\\\\ReactJS\\\\webchat\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport { db } from '../firebase/config';\n\nvar useFirestore = function useFirestore(collection, condittion) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      documents = _useState2[0],\n      setDocuments = _useState2[1];\n\n  useEffect(function () {\n    var collectionRef = db.collection(collection).orderBy('createAt'); // condittion\n    // {\n    //    fieldName: 'abc',\n    //    operator: '==',\n    //    compareValue: 'abc'\n    // }\n\n    if (collection) {\n      if (!condittion.compareValue || !condittion.compareValue.length) {\n        return;\n      }\n\n      collectionRef.where(condittion.fieldName, condittion.operator, condittion.compareValue);\n    }\n\n    var unsubscribe = collectionRef.onSnapshot(function (snapshot) {\n      var data = snapshot.docs.map(function (doc) {\n        return _objectSpread({}, doc.data, {\n          id: doc.id\n        });\n      });\n      setDocuments(documents);\n      console.log({\n        data: data,\n        snapshot: snapshot,\n        docs: snapshot.docs\n      });\n    });\n    return unsubscribe;\n  }, [collection, condittion]);\n  return documents;\n};\n\nexport default useFirestore;","map":{"version":3,"names":["React","useEffect","useState","db","useFirestore","collection","condittion","documents","setDocuments","collectionRef","orderBy","compareValue","length","where","fieldName","operator","unsubscribe","onSnapshot","snapshot","data","docs","map","doc","id","console","log"],"sources":["C:/Users/NamPham/Documents/ReactJS/webchat/src/hooks/useFirestore.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { db } from '../firebase/config';\r\n\r\nconst useFirestore = (collection, condittion) => {\r\n   const [documents, setDocuments] = useState([]);\r\n\r\n   useEffect(() => {\r\n      let collectionRef = db.collection(collection).orderBy('createAt');\r\n      \r\n      // condittion\r\n      // {\r\n      //    fieldName: 'abc',\r\n      //    operator: '==',\r\n      //    compareValue: 'abc'\r\n      // }\r\n      if (collection) {\r\n         if (!condittion.compareValue || !condittion.compareValue.length) {\r\n            return;\r\n         }\r\n\r\n         collectionRef.where(condittion.fieldName, condittion.operator, condittion.compareValue);\r\n      }\r\n\r\n      const unsubscribe = collectionRef.onSnapshot((snapshot) => {\r\n         const data = snapshot.docs.map(doc => ({\r\n            ...doc.data,\r\n            id: doc.id\r\n         }));\r\n\r\n         setDocuments(documents);\r\n         console.log({ data, snapshot, docs: snapshot.docs })\r\n      });\r\n      \r\n      return unsubscribe;\r\n   }, [collection, condittion]);\r\n\r\n   return documents;\r\n}\r\n\r\nexport default useFirestore;"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,EAAT,QAAmB,oBAAnB;;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,UAAD,EAAaC,UAAb,EAA4B;EAAA,gBACZJ,QAAQ,CAAC,EAAD,CADI;EAAA;EAAA,IACvCK,SADuC;EAAA,IAC5BC,YAD4B;;EAG9CP,SAAS,CAAC,YAAM;IACb,IAAIQ,aAAa,GAAGN,EAAE,CAACE,UAAH,CAAcA,UAAd,EAA0BK,OAA1B,CAAkC,UAAlC,CAApB,CADa,CAGb;IACA;IACA;IACA;IACA;IACA;;IACA,IAAIL,UAAJ,EAAgB;MACb,IAAI,CAACC,UAAU,CAACK,YAAZ,IAA4B,CAACL,UAAU,CAACK,YAAX,CAAwBC,MAAzD,EAAiE;QAC9D;MACF;;MAEDH,aAAa,CAACI,KAAd,CAAoBP,UAAU,CAACQ,SAA/B,EAA0CR,UAAU,CAACS,QAArD,EAA+DT,UAAU,CAACK,YAA1E;IACF;;IAED,IAAMK,WAAW,GAAGP,aAAa,CAACQ,UAAd,CAAyB,UAACC,QAAD,EAAc;MACxD,IAAMC,IAAI,GAAGD,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAkB,UAAAC,GAAG;QAAA,yBAC5BA,GAAG,CAACH,IADwB;UAE/BI,EAAE,EAAED,GAAG,CAACC;QAFuB;MAAA,CAArB,CAAb;MAKAf,YAAY,CAACD,SAAD,CAAZ;MACAiB,OAAO,CAACC,GAAR,CAAY;QAAEN,IAAI,EAAJA,IAAF;QAAQD,QAAQ,EAARA,QAAR;QAAkBE,IAAI,EAAEF,QAAQ,CAACE;MAAjC,CAAZ;IACF,CARmB,CAApB;IAUA,OAAOJ,WAAP;EACF,CA5BQ,EA4BN,CAACX,UAAD,EAAaC,UAAb,CA5BM,CAAT;EA8BA,OAAOC,SAAP;AACF,CAlCD;;AAoCA,eAAeH,YAAf"},"metadata":{},"sourceType":"module"}