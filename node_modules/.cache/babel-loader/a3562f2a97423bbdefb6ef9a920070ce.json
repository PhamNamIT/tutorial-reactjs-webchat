{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\NamPham\\\\Documents\\\\ReactJS\\\\webchat\\\\src\\\\Context\\\\AuthProvider.js\",\n    _s = $RefreshSig$();\n\nimport React, { createContext, useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { auth } from '../firebase/config';\nimport { Spin } from 'antd';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext();\n\nconst AuthProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const history = useNavigate();\n  const [user, setUser] = useState({});\n  const [isLoading, setIsLoading] = useState(true);\n  useEffect(() => {\n    const unsubscibed = auth.onAuthStateChanged(user => {\n      console.log({\n        user\n      });\n\n      if (user) {\n        const {\n          displayName,\n          email,\n          userId,\n          photoURL\n        } = user;\n        setUser({\n          displayName,\n          email,\n          userId,\n          photoURL\n        });\n        setIsLoading(false);\n        history('/');\n        return;\n      }\n\n      history('/login');\n    }); // Clean Function\n\n    return () => {\n      unsubscibed();\n    };\n  }, [history]);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user\n    },\n    children: isLoading ? /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 23\n    }, this) : {\n      children\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 7\n  }, this);\n};\n\n_s(AuthProvider, \"66+CT728l1y+R6pIBi0VC6d3cAE=\", false, function () {\n  return [useNavigate];\n});\n\n_c = AuthProvider;\nexport default AuthProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useEffect","useState","useNavigate","auth","Spin","AuthContext","AuthProvider","children","history","user","setUser","isLoading","setIsLoading","unsubscibed","onAuthStateChanged","console","log","displayName","email","userId","photoURL"],"sources":["C:/Users/NamPham/Documents/ReactJS/webchat/src/Context/AuthProvider.js"],"sourcesContent":["import React, { createContext, useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { auth } from '../firebase/config';\r\nimport { Spin } from 'antd'\r\n\r\nexport const AuthContext = createContext();\r\n\r\nconst AuthProvider = ({ children }) => {\r\n   const history = useNavigate();\r\n\r\n   const [user, setUser] = useState({});\r\n   const [isLoading, setIsLoading] = useState(true);\r\n\r\n   useEffect(() => {\r\n      const unsubscibed = auth.onAuthStateChanged((user) => {\r\n         console.log({user});\r\n         if (user) {\r\n            const { displayName, email, userId, photoURL } = user;\r\n            setUser({\r\n               displayName,\r\n               email,\r\n               userId,\r\n               photoURL,\r\n            });\r\n            setIsLoading(false);\r\n            history('/');\r\n            return;\r\n         }\r\n\r\n         history('/login');\r\n      });\r\n      \r\n      // Clean Function\r\n      return () => {\r\n         unsubscibed();\r\n      }\r\n   }, [history]);\r\n   \r\n\r\n   return ( \r\n      <AuthContext.Provider value={{ user }}>\r\n         {isLoading ? <Spin /> : {children}}\r\n      </AuthContext.Provider>\r\n    );\r\n}\r\n\r\nexport default AuthProvider;"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,SAA/B,EAA0CC,QAA1C,QAA0D,OAA1D;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,IAAT,QAAqB,oBAArB;AACA,SAASC,IAAT,QAAqB,MAArB;;AAEA,OAAO,MAAMC,WAAW,gBAAGN,aAAa,EAAjC;;AAEP,MAAMO,YAAY,GAAG,QAAkB;EAAA;;EAAA,IAAjB;IAAEC;EAAF,CAAiB;EACpC,MAAMC,OAAO,GAAGN,WAAW,EAA3B;EAEA,MAAM,CAACO,IAAD,EAAOC,OAAP,IAAkBT,QAAQ,CAAC,EAAD,CAAhC;EACA,MAAM,CAACU,SAAD,EAAYC,YAAZ,IAA4BX,QAAQ,CAAC,IAAD,CAA1C;EAEAD,SAAS,CAAC,MAAM;IACb,MAAMa,WAAW,GAAGV,IAAI,CAACW,kBAAL,CAAyBL,IAAD,IAAU;MACnDM,OAAO,CAACC,GAAR,CAAY;QAACP;MAAD,CAAZ;;MACA,IAAIA,IAAJ,EAAU;QACP,MAAM;UAAEQ,WAAF;UAAeC,KAAf;UAAsBC,MAAtB;UAA8BC;QAA9B,IAA2CX,IAAjD;QACAC,OAAO,CAAC;UACLO,WADK;UAELC,KAFK;UAGLC,MAHK;UAILC;QAJK,CAAD,CAAP;QAMAR,YAAY,CAAC,KAAD,CAAZ;QACAJ,OAAO,CAAC,GAAD,CAAP;QACA;MACF;;MAEDA,OAAO,CAAC,QAAD,CAAP;IACF,CAhBmB,CAApB,CADa,CAmBb;;IACA,OAAO,MAAM;MACVK,WAAW;IACb,CAFD;EAGF,CAvBQ,EAuBN,CAACL,OAAD,CAvBM,CAAT;EA0BA,oBACG,QAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAE;MAAEC;IAAF,CAA7B;IAAA,UACIE,SAAS,gBAAG,QAAC,IAAD;MAAA;MAAA;MAAA;IAAA,QAAH,GAAc;MAACJ;IAAD;EAD3B;IAAA;IAAA;IAAA;EAAA,QADH;AAKF,CArCD;;GAAMD,Y;UACaJ,W;;;KADbI,Y;AAuCN,eAAeA,YAAf"},"metadata":{},"sourceType":"module"}