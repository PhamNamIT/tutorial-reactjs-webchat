{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\NamPham\\\\Documents\\\\ReactJS\\\\webchat\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\NamPham\\\\Documents\\\\ReactJS\\\\webchat\\\\src\\\\Context\\\\AuthProvider.js\";\n\nimport React, { createContext, useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { auth } from '../firebase/config';\nimport { Spin } from 'antd';\nexport var AuthContext = createContext();\n\nvar AuthProvider = function AuthProvider(_ref) {\n  var children = _ref.children;\n  var history = useNavigate();\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isLoading = _useState4[0],\n      setIsLoading = _useState4[1];\n\n  useEffect(function () {\n    var unsubscibed = auth.onAuthStateChanged(function (user) {\n      if (user) {\n        var displayName = user.displayName,\n            email = user.email,\n            uid = user.uid,\n            photoURL = user.photoURL;\n        setUser({\n          displayName: displayName,\n          email: email,\n          uid: uid,\n          photoURL: photoURL\n        });\n        setIsLoading(false);\n        history('/');\n        return;\n      }\n\n      setIsLoading(false);\n      history('/login');\n    }); // Clean Function\n\n    return function () {\n      unsubscibed();\n    };\n  }, [history]);\n  return /*#__PURE__*/React.createElement(AuthContext.Provider, {\n    value: {\n      user: user\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, isLoading ? /*#__PURE__*/React.createElement(Spin, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 23\n    }\n  }) : children);\n};\n\nexport default AuthProvider;","map":{"version":3,"names":["React","createContext","useEffect","useState","useNavigate","auth","Spin","AuthContext","AuthProvider","children","history","user","setUser","isLoading","setIsLoading","unsubscibed","onAuthStateChanged","displayName","email","uid","photoURL"],"sources":["C:/Users/NamPham/Documents/ReactJS/webchat/src/Context/AuthProvider.js"],"sourcesContent":["import React, { createContext, useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { auth } from '../firebase/config';\r\nimport { Spin } from 'antd';\r\n\r\nexport const AuthContext = createContext();\r\n\r\nconst AuthProvider = ({ children }) => {\r\n   const history = useNavigate();\r\n\r\n   const [user, setUser] = useState({});\r\n   const [isLoading, setIsLoading] = useState(true);\r\n\r\n   useEffect(() => {\r\n      const unsubscibed = auth.onAuthStateChanged((user) => {\r\n         if (user) {\r\n            const { displayName, email, uid, photoURL } = user;\r\n            setUser({\r\n               displayName,\r\n               email,\r\n               uid,\r\n               photoURL,\r\n            });\r\n            setIsLoading(false);\r\n            history('/');\r\n            return;\r\n         }\r\n\r\n         setIsLoading(false);\r\n         history('/login');\r\n      });\r\n      \r\n      // Clean Function\r\n      return () => {\r\n         unsubscibed();\r\n      }\r\n   }, [history]);\r\n   \r\n\r\n   return ( \r\n      <AuthContext.Provider value={{ user }}>\r\n         {isLoading ? <Spin /> : children}\r\n      </AuthContext.Provider>\r\n    );\r\n}\r\n\r\nexport default AuthProvider;"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,SAA/B,EAA0CC,QAA1C,QAA0D,OAA1D;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,IAAT,QAAqB,oBAArB;AACA,SAASC,IAAT,QAAqB,MAArB;AAEA,OAAO,IAAMC,WAAW,GAAGN,aAAa,EAAjC;;AAEP,IAAMO,YAAY,GAAG,SAAfA,YAAe,OAAkB;EAAA,IAAfC,QAAe,QAAfA,QAAe;EACpC,IAAMC,OAAO,GAAGN,WAAW,EAA3B;;EADoC,gBAGZD,QAAQ,CAAC,EAAD,CAHI;EAAA;EAAA,IAG7BQ,IAH6B;EAAA,IAGvBC,OAHuB;;EAAA,iBAIFT,QAAQ,CAAC,IAAD,CAJN;EAAA;EAAA,IAI7BU,SAJ6B;EAAA,IAIlBC,YAJkB;;EAMpCZ,SAAS,CAAC,YAAM;IACb,IAAMa,WAAW,GAAGV,IAAI,CAACW,kBAAL,CAAwB,UAACL,IAAD,EAAU;MACnD,IAAIA,IAAJ,EAAU;QAAA,IACCM,WADD,GACuCN,IADvC,CACCM,WADD;QAAA,IACcC,KADd,GACuCP,IADvC,CACcO,KADd;QAAA,IACqBC,GADrB,GACuCR,IADvC,CACqBQ,GADrB;QAAA,IAC0BC,QAD1B,GACuCT,IADvC,CAC0BS,QAD1B;QAEPR,OAAO,CAAC;UACLK,WAAW,EAAXA,WADK;UAELC,KAAK,EAALA,KAFK;UAGLC,GAAG,EAAHA,GAHK;UAILC,QAAQ,EAARA;QAJK,CAAD,CAAP;QAMAN,YAAY,CAAC,KAAD,CAAZ;QACAJ,OAAO,CAAC,GAAD,CAAP;QACA;MACF;;MAEDI,YAAY,CAAC,KAAD,CAAZ;MACAJ,OAAO,CAAC,QAAD,CAAP;IACF,CAhBmB,CAApB,CADa,CAmBb;;IACA,OAAO,YAAM;MACVK,WAAW;IACb,CAFD;EAGF,CAvBQ,EAuBN,CAACL,OAAD,CAvBM,CAAT;EA0BA,oBACG,oBAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAE;MAAEC,IAAI,EAAJA;IAAF,CAA7B;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACIE,SAAS,gBAAG,oBAAC,IAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAH,GAAcJ,QAD3B,CADH;AAKF,CArCD;;AAuCA,eAAeD,YAAf"},"metadata":{},"sourceType":"module"}